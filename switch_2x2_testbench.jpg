LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
USE IEEE.NUMERIC_STD.ALL;

ENTITY switch_2x2_testbench IS
END switch_2x2_testbench;

ARCHITECTURE arch_switch_2x2_testbench OF switch_2x2_testbench IS
  COMPONENT switch_2x2 IS
    PORT (
                  X: IN STD_LOGIC_VECTOR(3 DOWNTO 0);
		  Y: IN STD_LOGIC_VECTOR(3 DOWNTO 0);
		  S: IN STD_LOGIC_VECTOR(1 DOWNTO 0);
		  U: OUT STD_LOGIC_VECTOR(3 DOWNTO 0);
		  V: OUT STD_LOGIC_VECTOR(3 DOWNTO 0);
		  C: OUT STD_LOGIC
	 );
	END COMPONENT;
	SIGNAL s_x,s_y,s_u,s_v : STD_LOGIC_VECTOR(3 DOWNTO 0);
	SIGNAL s_s : STD_LOGIC_VECTOR (1 DOWNTO 0);
	SIGNAL s_c : STD_LOGIC;
BEGIN
  uut: switch_2x2
  PORT MAP (
    X => s_x,
    Y => s_y,
    S => s_s,
    U => s_u,
    V => s_v,
    C => s_c
  );
  stim: PROCESS
  BEGIN
    s_x <= "0000"; s_y <= "1111"; s_s <= "11"; WAIT FOR 20ns;
    s_x <= "1111"; s_y <= "0000"; s_s <= "11"; WAIT FOR 20ns;
    s_x <= "1110"; s_y <= "0111"; s_s <= "10"; WAIT FOR 20ns;
    s_x <= "1000"; s_y <= "1111"; s_s <= "10"; WAIT FOR 20ns;
    WAIT;
  END PROCESS;
  verif: PROCESS
  BEGIN
    WAIT FOR 10ns;
    ASSERT (s_u = "0000" AND s_v = "1111" AND s_c = '0' ) REPORT "Greska 1" SEVERITY error; WAIT FOR 20ns;
    ASSERT (s_u = "0000" AND s_v = "1111" AND s_c = '0' ) REPORT "Greska 2" SEVERITY error; WAIT FOR 20ns;
    ASSERT (s_c = '1' ) REPORT "Greska 3" SEVERITY error; WAIT FOR 20ns;
    ASSERT (s_u = "1000" AND s_v = "1111" AND s_c = '0' ) REPORT "Greska 4" SEVERITY error; WAIT FOR 20ns;
    WAIT;
  END PROCESS;
END ARCHITECTURE;
	  